import{n as e,z as d,l as k,B as C,r as m,u,C as M,D as L,H as Q,E,J as R,K as I,V as T,m as Y,I as v,t as S,L as w,N as F}from"./index-cde6f15b.js";import{B as $}from"./index-e1983a32.js";import{B as U,a as V}from"./avatar-342a0f5c.js";const G="data:image/webp;base64,UklGRpYAAABXRUJQVlA4WAoAAAAQAAAAFwAAFwAAQUxQSEYAAAABLyAQSPEomR4REQNWkWQ1WpIDBOR/6iSchrf+zZAxENH/CcCLdsoBQtIMJo8IaUaTR4RmYnKmKfeNgq8VYjr4qTEOBc8CVlA4ICoAAADwAgCdASoYABgAPpE6mEeloyKhMAgAsBIJaQAAe8jIAAD+9/D6/v1gAAA=",W="data:image/webp;base64,UklGRpoAAABXRUJQVlA4WAoAAAAQAAAAFwAAFwAAQUxQSEgAAAABLyAQSPEomR4REQMGsW1FecMrQARQA1hBE7C9/mk+a4GI/k8ATvxdR9CDJokASvkczDt5WkjoTUCTaHUuaWJH55LGns63a3NWUDggLAAAAPACAJ0BKhgAGAA+kTqXR6WjIiEwCACwEglpAAB7yMgAAP730+FQ3/7qaAAA",b=({toggleDirection:t,name:s,direction:n})=>e.jsx("div",{className:d["btn-wrapper"],children:e.jsxs($,{classname:`${d["sort-btn"]} ${n[s]?"":d["sort-btn_inactive"]}`,name:s,onClick:t,children:[e.jsx("span",{children:s}),e.jsx("img",{alt:"Sort",className:d["sort-btn__img"],src:n[s]==="up"||n[s]===""?W:G})]})}),J=({clearSort:t})=>e.jsx($,{classname:`${d["sort-btn"]} ${d["sort-btn_clear"]}`,onClick:()=>t(),children:e.jsx("span",{children:"Clear sort"})}),O=t=>{const{id:s}=k(),{endpoint:n,onTabChange:r}=C(t),[_,l]=m.useState([]),[i,p]=m.useState({title:"",date:"",rating:""}),{data:a,isLoading:x,isError:h,error:f}=u().useVideoCreditsPerson(s,n[0],{onSuccess:c=>{c!=null&&c.cast&&l(c.cast)}}),j=c=>{const A=i[c.target.name]==="down"||i[c.target.name]===""?"up":"down";p(g=>({...g,[c.target.name]:A}))},B=()=>{p({title:"",date:"",rating:""})};return m.useEffect(()=>()=>p(i),[n]),m.useEffect(()=>{(()=>{const A=n[0]==="movie"?"title":"name",g=n[0]==="movie"?"release_date":"first_air_date",D="vote_average",P=a==null?void 0:a.cast.toSorted((y,N)=>M(y,N,A,i.title)||L(y,N,g,i.date)||Q(y,N,D,i.rating));l(P)})()},[i,n,a==null?void 0:a.cast]),{videos:_,toggleDirection:j,clearSort:B,isLoading:x,isError:h,error:f,direction:i,onTabChange:r,endpoint:n}},H="_profile_12ypp_15",K="_profile__content_12ypp_19",q="_profile__content__photo_12ypp_33",z="_profile__content__info_12ypp_62",X="_name_12ypp_72",Z="_text_12ypp_77",ee="_biography_short_12ypp_84",se="_biography_12ypp_84",oe="_more__btn_12ypp_96",ne="_profile__content__info_skeleton_12ypp_126",te="_biography_skeleton_12ypp_151",ie="_modal_12ypp_184",re="_modal__content_12ypp_193",le="_modal__text_12ypp_221",ae="_heading_12ypp_236",ce="_link_pink_12ypp_259",o={"opacity-backdrop":"_opacity-backdrop_12ypp_1",profile:H,profile__content:K,profile__content__photo:q,profile__content__info:z,"info-item":"_info-item_12ypp_67","info-span":"_info-span_12ypp_68",name:X,text:Z,biography_short:ee,biography:se,more__btn:oe,profile__content__info_skeleton:ne,"info-item_skeleton":"_info-item_skeleton_12ypp_130",biography_skeleton:te,"btn__group-skeleton":"_btn__group-skeleton_12ypp_156","btn__sort-skeleton":"_btn__sort-skeleton_12ypp_162",modal:ie,modal__content:re,modal__text:le,heading:ae,"container-sort":"_container-sort_12ypp_251",link_pink:ce,"grid_person-movies":"_grid_person-movies_12ypp_273"},_e=({endpoints:t,media_type:s})=>{const{videos:n,toggleDirection:r,clearSort:_,isLoading:l,isError:i,error:p,direction:a,onTabChange:x,endpoint:h}=O(t);return e.jsxs(E,{error:p,isError:i,title:"Profile",children:[e.jsx(R,{isLoading:l,tabsNames:t}),e.jsxs("div",{className:"wrapper",children:[e.jsxs("div",{className:o["container-sort"],children:[e.jsx(b,{direction:a,name:"title",toggleDirection:r}),e.jsx(b,{direction:a,name:"date",toggleDirection:r}),e.jsx(b,{direction:a,name:"rating",toggleDirection:r}),e.jsx(J,{clearSort:_})]}),e.jsxs("div",{className:o.heading,children:[e.jsx("h2",{className:"title-article",children:h[0]==="movie"?"Movies":"TV Show"}),e.jsx(I,{data:s,onTabChange:x})]}),e.jsx("div",{className:`grid ${o["grid_person-movies"]}`,children:n==null?void 0:n.map((f,j)=>e.jsx(T,{classnameCard:"card_grid",data:f,endpoint:h},j))})]})]})},pe=()=>{const[t,s]=m.useState(!1),n=()=>{s(!0),document.body.classList.add("overflow-hidden")},r=l=>{l.target.id!=="modal-biography"&&(s(!1),document.body.classList.remove("overflow-hidden"))},_=l=>{l.key==="Escape"&&(s(!1),document.body.classList.remove("overflow-hidden"))};return m.useEffect(()=>(document.body.addEventListener("keydown",_),()=>document.body.removeEventListener("keydown",_)),[]),{openModal:n,closeModal:r,open:t}},me=m.memo(({data:t})=>{const{openModal:s,closeModal:n,open:r}=pe();return e.jsxs(e.Fragment,{children:[t?e.jsxs("div",{className:o.biography,children:[e.jsxs("p",{className:`${o["info-item"]} ${o.biography_short}`,children:[e.jsx("span",{className:`${o["info-span"]}`,children:e.jsx("span",{className:o.name,children:"Biography: "})})," ",e.jsx("span",{className:`${o.text} ${o.biography_content}`,children:t})]}),e.jsx("button",{className:o.more__btn,title:"Read more",onClick:s,children:"Read more"})]}):null,r?e.jsx("div",{className:o.modal,id:"modal",onClick:n,children:e.jsxs("div",{className:o.modal__content,children:[e.jsx(U,{close:n}),e.jsx("pre",{className:o.modal__text,id:"modal-biography",children:t})]})}):null]})}),de=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:o.profile__content,children:[e.jsx("div",{className:`${o.profile__content__photo} skeleton`}),e.jsxs("div",{className:`${o.profile__content__info} ${o.profile__content__info_skeleton}`,children:[Array(6).fill("skeleton").map((t,s)=>e.jsx("p",{className:`${o["info-item"]} ${o["info-item_skeleton"]} skeleton`},s)),e.jsx("p",{className:`${o.biography_skeleton} skeleton`}),e.jsx("p",{className:`${o["info-item"]} ${o["info-item_skeleton"]} skeleton`})]})]}),e.jsxs("div",{className:o["btn__group-skeleton"],children:[e.jsx("div",{className:`${o["btn__sort-skeleton"]} skeleton`}),e.jsx("div",{className:`${o["btn__sort-skeleton"]} skeleton`}),e.jsx("div",{className:`${o["btn__sort-skeleton"]} skeleton`}),e.jsx("div",{className:`${o["btn__sort-skeleton"]} skeleton`})]})]}),he=()=>{const{id:t}=k(),{data:s,isLoading:n,isError:r,error:_}=u().usePerson(t),l=Y(i=>{var p;return(p=i.urlBaseForImages.url)==null?void 0:p.profile});return e.jsx(E,{classname:"main",error:_,isError:r,title:"Profile",children:e.jsxs("div",{className:`${o.profile} wrapper`,children:[e.jsx("div",{className:o["opacity-backdrop"],children:e.jsx(v,{src:s!=null&&s.profile_path?l+(s==null?void 0:s.profile_path):null})}),e.jsx("h1",{className:"title-article",children:"Profile"}),n?e.jsx(de,{}):e.jsxs("div",{className:o.profile__content,children:[e.jsx("div",{className:o.profile__content__photo,children:e.jsx(v,{src:s!=null&&s.profile_path?l+(s==null?void 0:s.profile_path):V})}),e.jsxs("div",{className:o.profile__content__info,children:[e.jsxs("p",{className:o["info-item"],children:[e.jsx("span",{className:o.name,children:"Name:"}),e.jsx("span",{className:o.text,children:s==null?void 0:s.name})]}),e.jsxs("p",{className:o["info-item"],children:[e.jsx("span",{className:o.name,children:"Gender:"}),e.jsx("span",{className:o.text,children:(s==null?void 0:s.gender)===1?"Female":"Male"})]}),s!=null&&s.birthday?e.jsxs("p",{className:o["info-item"],children:[e.jsx("span",{className:o.name,children:"Birthday: "}),e.jsx("span",{className:o.text,children:S(s==null?void 0:s.birthday).format("MMM D, YYYY")})]}):null,s!=null&&s.deathday?e.jsxs("p",{className:o["info-item"],children:[e.jsx("span",{className:o.name,children:"Deathday: "}),e.jsx("span",{className:o.text,children:S(s==null?void 0:s.deathday).format("MMM D, YYYY")})]}):null,s!=null&&s.imdb_id?e.jsxs("p",{className:o["info-item"],children:[e.jsx("span",{className:o.name,children:"Imdb_id : "}),e.jsx("span",{className:o.text,children:e.jsxs(w,{to:`https://www.imdb.com/name/${s.imdb_id}`,className:o.link_pink,title:"Go to imdb.com",children:["ID ",s.imdb_id]})})]}):null,s!=null&&s.place_of_birth?e.jsxs("p",{className:o["info-item"],children:[e.jsx("span",{className:o.name,children:"Place of birth: "}),e.jsx("span",{className:o.text,children:s==null?void 0:s.place_of_birth})]}):null,s!=null&&s.homepage?e.jsxs("p",{className:o["info-item"],children:[e.jsx("span",{className:o.name,children:"Homepage: "}),e.jsx("span",{className:o.text,children:e.jsx(w,{className:o.link_pink,to:s==null?void 0:s.homepage,title:"Go to the actor's home page",children:s==null?void 0:s.homepage})})]}):null,e.jsx(me,{data:s==null?void 0:s.biography}),s!=null&&s.popularity?e.jsxs("p",{className:o["info-item"],children:[e.jsx("span",{className:o.name,children:"Popularity:"}),e.jsx("span",{className:o.text,children:s==null?void 0:s.popularity})]}):null]})]})]})})},xe=()=>{const{id:t}=k(),{endpoint:s}=C(["movie","tv"]),{error:n}=u().useVideoCreditsPerson(t,s[0]);return e.jsx(F,{error:n,children:e.jsxs("div",{className:"main",children:[e.jsx(he,{}),e.jsx(_e,{endpoints:["movie","tv"],media_type:["Movies","TV Shows"]})]})})},ge=()=>e.jsx(xe,{});export{ge as default};
