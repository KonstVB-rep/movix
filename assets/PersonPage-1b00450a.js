import{n as e,z as x,l as b,B,r as c,u as v,E as $,C as Q,D,V as L,H as I,J as Y,K as F,m as T,I as y,t as w,L as S,N as U}from"./index-3c34359a.js";import{B as C}from"./index-80f42cfd.js";import{B as V,a as W}from"./avatar-7ac2a537.js";const G="data:image/webp;base64,UklGRpYAAABXRUJQVlA4WAoAAAAQAAAAFwAAFwAAQUxQSEYAAAABLyAQSPEomR4REQNWkWQ1WpIDBOR/6iSchrf+zZAxENH/CcCLdsoBQtIMJo8IaUaTR4RmYnKmKfeNgq8VYjr4qTEOBc8CVlA4ICoAAADwAgCdASoYABgAPpE6mEeloyKhMAgAsBIJaQAAe8jIAAD+9/D6/v1gAAA=",J="data:image/webp;base64,UklGRpoAAABXRUJQVlA4WAoAAAAQAAAAFwAAFwAAQUxQSEgAAAABLyAQSPEomR4REQMGsW1FecMrQARQA1hBE7C9/mk+a4GI/k8ATvxdR9CDJokASvkczDt5WkjoTUCTaHUuaWJH55LGns63a3NWUDggLAAAAPACAJ0BKhgAGAA+kTqXR6WjIiEwCACwEglpAAB7yMgAAP730+FQ3/7qaAAA",u=({toggleDirection:o,name:s,direction:l})=>e.jsx("div",{className:x["btn-wrapper"],children:e.jsxs(C,{classname:`${x["sort-btn"]} ${l[s]?"":x["sort-btn_inactive"]}`,name:s,onClick:o,children:[e.jsx("span",{children:s}),e.jsx("img",{alt:"Sort",className:x["sort-btn__img"],src:l[s]==="up"||l[s]===""?J:G})]})}),H=({clearSort:o})=>e.jsx(C,{classname:`${x["sort-btn"]} ${x["sort-btn_clear"]}`,onClick:()=>o(),children:e.jsx("span",{children:"Clear sort"})}),O="_profile_1k4ex_15",K="_profile__content_1k4ex_19",q="_profile__content__photo_1k4ex_33",z="_profile__content__info_1k4ex_62",X="_name_1k4ex_72",Z="_text_1k4ex_77",ee="_biography_short_1k4ex_84",se="_more__btn_1k4ex_96",ne="_svg_1k4ex_115",oe="_profile__content__info_skeleton_1k4ex_126",te="_biography_skeleton_1k4ex_151",ie="_modal_1k4ex_184",le="_modal__content_1k4ex_193",re="_modal__text_1k4ex_221",ae="_heading_1k4ex_236",ce="_link_pink_1k4ex_259",n={"opacity-backdrop":"_opacity-backdrop_1k4ex_1",profile:O,profile__content:K,profile__content__photo:q,profile__content__info:z,"info-item":"_info-item_1k4ex_67","info-span":"_info-span_1k4ex_68",name:X,text:Z,biography_short:ee,more__btn:se,svg:ne,profile__content__info_skeleton:oe,"info-item_skeleton":"_info-item_skeleton_1k4ex_130",biography_skeleton:te,"btn__group-skeleton":"_btn__group-skeleton_1k4ex_156","btn__sort-skeleton":"_btn__sort-skeleton_1k4ex_162",modal:ie,modal__content:le,modal__text:re,heading:ae,"container-sort":"_container-sort_1k4ex_251",link_pink:ce,"grid_person-movies":"_grid_person-movies_1k4ex_264"},_e=({endpoints:o,media_type:s})=>{const{id:l}=b(),{endpoint:r,onTabChange:m}=B(o),[_,p]=c.useState([]),[t,d]=c.useState({title:"",date:"",rating:""}),{data:i,isLoading:f,isError:j,error:E,isFetching:he}=v().useVideoCreditsPerson(l,r[0],{onSuccess:a=>{a!=null&&a.cast&&p(a.cast)}}),k=a=>{const h=t[a.target.name]==="down"||t[a.target.name]===""?"up":"down";d(A=>({...A,[a.target.name]:h}))},M=()=>{d({title:"",date:"",rating:""})};return c.useEffect(()=>()=>d(t),[r]),c.useEffect(()=>{(()=>{const h=r[0]==="movie"?"title":"name",A=r[0]==="movie"?"release_date":"first_air_date",P="vote_average",R=i==null?void 0:i.cast.toSorted((g,N)=>I(g,N,h,t.title)||Y(g,N,A,t.date)||F(g,N,P,t.rating));p(R)})()},[t,r,i==null?void 0:i.cast]),e.jsxs($,{error:E,isError:j,title:"Profile",children:[e.jsx(Q,{isLoading:f,tabsNames:o}),e.jsxs("div",{className:"wrapper",children:[e.jsxs("div",{className:n["container-sort"],children:[e.jsx(u,{direction:t,name:"title",toggleDirection:k}),e.jsx(u,{direction:t,name:"date",toggleDirection:k}),e.jsx(u,{direction:t,name:"rating",toggleDirection:k}),e.jsx(H,{clearSort:M})]}),e.jsxs("div",{className:n.heading,children:[e.jsx("h2",{className:"title-article",children:r[0]==="movie"?"Movies":"TV Show"}),e.jsx(D,{data:s,onTabChange:m})]}),e.jsx("div",{className:`grid ${n["grid_person-movies"]}`,children:_==null?void 0:_.map((a,h)=>e.jsx(L,{classnameCard:"card_grid",data:a,endpoint:r},h))})]})]})},me=c.memo(({data:o})=>{const s=c.useRef(null),l=c.useRef(null),[r,m]=c.useState(!1),[_,p]=c.useState(!1),t=()=>{m(!0),document.body.classList.add("overflow-hidden")},d=i=>{i.target.id!=="modal-biography"&&(m(!1),document.body.classList.remove("overflow-hidden"))};return c.useEffect(()=>{var f,j;const i=(f=s==null?void 0:s.current)==null?void 0:f.getBoundingClientRect();p(((j=s==null?void 0:s.current)==null?void 0:j.scrollHeight)>(i==null?void 0:i.height))},[_]),e.jsxs(e.Fragment,{children:[o?e.jsx("div",{className:n.biography,children:e.jsxs("p",{ref:s,className:`${n["info-item"]} ${n.biography_short}`,children:[e.jsx("span",{className:`${n["info-span"]}`,children:e.jsx("span",{className:n.name,children:"Biography: "})})," ",e.jsx("span",{ref:l,className:`${n.text} ${n.biography_content}`,children:o}),_?e.jsx("button",{className:n.more__btn,title:"Read more",onClick:t,children:e.jsxs("svg",{viewBox:"0 0 256 256",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("path",{d:"M0 0h256v256H0z",fill:"none"}),e.jsx("path",{d:"m96 48 80 80-80 80",fill:"none",stroke:"#ec5f2b",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"24"})]})}):null]})}):null,r?e.jsx("div",{className:n.modal,id:"modal",onClick:d,children:e.jsxs("div",{className:n.modal__content,children:[e.jsx(V,{close:d}),e.jsx("pre",{className:n.modal__text,id:"modal-biography",children:o})]})}):null]})}),pe=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:n.profile__content,children:[e.jsx("div",{className:`${n.profile__content__photo} skeleton`}),e.jsxs("div",{className:`${n.profile__content__info} ${n.profile__content__info_skeleton}`,children:[Array(6).fill("skeleton").map((o,s)=>e.jsx("p",{className:`${n["info-item"]} ${n["info-item_skeleton"]} skeleton`},s)),e.jsx("p",{className:`${n.biography_skeleton} skeleton`}),e.jsx("p",{className:`${n["info-item"]} ${n["info-item_skeleton"]} skeleton`})]})]}),e.jsxs("div",{className:n["btn__group-skeleton"],children:[e.jsx("div",{className:`${n["btn__sort-skeleton"]} skeleton`}),e.jsx("div",{className:`${n["btn__sort-skeleton"]} skeleton`}),e.jsx("div",{className:`${n["btn__sort-skeleton"]} skeleton`}),e.jsx("div",{className:`${n["btn__sort-skeleton"]} skeleton`})]})]}),de=()=>{const{id:o}=b(),{data:s,isLoading:l,isError:r,error:m}=v().usePerson(o),_=T(p=>{var t;return(t=p.urlBaseForImages.url)==null?void 0:t.profile});return e.jsx($,{classname:"main",error:m,isError:r,title:"Profile",children:e.jsxs("div",{className:`${n.profile} wrapper`,children:[e.jsx("div",{className:n["opacity-backdrop"],children:e.jsx(y,{src:s!=null&&s.profile_path?_+(s==null?void 0:s.profile_path):null})}),e.jsx("h1",{className:"title-article",children:"Profile"}),l?e.jsx(pe,{}):e.jsxs("div",{className:n.profile__content,children:[e.jsx("div",{className:n.profile__content__photo,children:e.jsx(y,{src:s!=null&&s.profile_path?_+(s==null?void 0:s.profile_path):W})}),e.jsxs("div",{className:n.profile__content__info,children:[e.jsxs("p",{className:n["info-item"],children:[e.jsx("span",{className:n.name,children:"Name:"}),e.jsx("span",{className:n.text,children:s==null?void 0:s.name})]}),e.jsxs("p",{className:n["info-item"],children:[e.jsx("span",{className:n.name,children:"Gender:"}),e.jsx("span",{className:n.text,children:(s==null?void 0:s.gender)===1?"Female":"Male"})]}),s!=null&&s.birthday?e.jsxs("p",{className:n["info-item"],children:[e.jsx("span",{className:n.name,children:"Birthday: "}),e.jsx("span",{className:n.text,children:w(s==null?void 0:s.birthday).format("MMM D, YYYY")})]}):null,s!=null&&s.deathday?e.jsxs("p",{className:n["info-item"],children:[e.jsx("span",{className:n.name,children:"Deathday: "}),e.jsx("span",{className:n.text,children:w(s==null?void 0:s.deathday).format("MMM D, YYYY")})]}):null,s!=null&&s.imdb_id?e.jsxs("p",{className:n["info-item"],children:[e.jsx("span",{className:n.name,children:"Imdb_id : "}),e.jsx("span",{className:n.text,children:e.jsxs(S,{to:`https://www.imdb.com/name/${s.imdb_id}`,className:n.link_pink,title:"Go to imdb.com",children:["ID ",s.imdb_id]})})]}):null,s!=null&&s.place_of_birth?e.jsxs("p",{className:n["info-item"],children:[e.jsx("span",{className:n.name,children:"Place of birth: "}),e.jsx("span",{className:n.text,children:s==null?void 0:s.place_of_birth})]}):null,s!=null&&s.homepage?e.jsxs("p",{className:n["info-item"],children:[e.jsx("span",{className:n.name,children:"Homepage: "}),e.jsx("span",{className:n.text,children:e.jsx(S,{className:n.link_pink,to:s==null?void 0:s.homepage,title:"Go to the actor's home page",children:s==null?void 0:s.homepage})})]}):null,e.jsx(me,{data:s==null?void 0:s.biography}),s!=null&&s.popularity?e.jsxs("p",{className:n["info-item"],children:[e.jsx("span",{className:n.name,children:"Popularity:"}),e.jsx("span",{className:n.text,children:s==null?void 0:s.popularity})]}):null]})]})]})})},xe=()=>{const{id:o}=b(),{endpoint:s}=B(["movie","tv"]),{error:l}=v().useVideoCreditsPerson(o,s[0]);return e.jsx(U,{error:l,children:e.jsxs("div",{className:"main",children:[e.jsx(de,{}),e.jsx(_e,{endpoints:["movie","tv"],media_type:["Movies","TV Shows"]})]})})},Ae=()=>e.jsx(xe,{});export{Ae as default};
